<UserControl x:Class="StudentManagement.UI.Pages.ProfilePage"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             Background="#F8F9FB">

    <UserControl.Resources>
        <!-- Gradient Header -->
        <LinearGradientBrush x:Key="HeaderGradient" StartPoint="0,0" EndPoint="1,0">
            <GradientStop Color="#6C63FF" Offset="0.0"/>
            <GradientStop Color="#48C6EF" Offset="1.0"/>
        </LinearGradientBrush>

        <!-- Drop shadow effect -->
        <DropShadowEffect x:Key="CardShadow"
                          BlurRadius="10"
                          ShadowDepth="2"
                          Opacity="0.2"/>

    </UserControl.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- ================= HEADER ================= -->
        <Border Height="180" 
                Background="{StaticResource HeaderGradient}" 
                CornerRadius="0,0,20,20"
                Effect="{StaticResource CardShadow}">
            <Grid Margin="30">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <!-- Avatar -->
                <Grid Width="90" Height="90" VerticalAlignment="Center">
                    <Ellipse Stroke="White" StrokeThickness="2">
                        <Ellipse.Fill>
                            <ImageBrush ImageSource="/Assets/Icons/user.png"/>
                        </Ellipse.Fill>
                    </Ellipse>
                        </Grid>


                <!-- Name + Email -->
                <StackPanel Grid.Column="1" Margin="20,0" VerticalAlignment="Center">
                    <TextBlock Text="Your name" 
                               FontSize="22" 
                               FontWeight="SemiBold" 
                               Foreground="White"/>
                    <TextBlock Text="yourname@gmail.com"
                               FontSize="14" 
                               Foreground="#EAEAEA"/>
                    <TextBlock x:Name="tbMSV" Text="MSV: -" FontSize="12" Foreground="#EAEAEA"/>
                    <TextBlock x:Name="tbStatus" Text="Trạng thái: -" FontSize="12" Foreground="#EAEAEA"/>
                </StackPanel>

                <!-- Edit Button -->
                <Button x:Name="BtnEdit"
                        Grid.Column="2"
                        Content="Edit"
                        Width="100"
                        Height="38"
                        Background="White"
                        Foreground="#3366FF"
                        FontWeight="SemiBold"
                        BorderThickness="0"
                        VerticalAlignment="Center"
                        Style="{DynamicResource ActionButtonStyle}"
                        Cursor="Hand"
                        Click="BtnEdit_Click"/>
            </Grid>
        </Border>

        <!-- ================= CONTENT ================= -->
        <Border Grid.Row="1" 
                Background="White" 
                CornerRadius="10"
                Margin="40,-40,40,40"
                Padding="40"
                Effect="{StaticResource CardShadow}">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>
                    
                    <!-- Thông tin -->
                    <ScrollViewer VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Disabled">
                        <Grid Margin="40">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="20"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <!-- Student info group -->
                    <Border Grid.Column="0" Background="#FAFAFA" Padding="16" CornerRadius="8" BorderBrush="#EEE" BorderThickness="1">
                        <StackPanel>
                            <TextBlock Text="Thông tin sinh viên" FontSize="16" FontWeight="SemiBold" Margin="0,0,0,8"/>

                            <UniformGrid Columns="2" Rows="6" Margin="0,8,0,0">
                                <TextBlock Text="MSV" VerticalAlignment="Center"/>
                                <TextBlock x:Name="txtMSV" Text="-" VerticalAlignment="Center" FontWeight="SemiBold"/>

                                <TextBlock Text="Họ và tên" VerticalAlignment="Center"/>
                                <TextBox x:Name="txtName" Style="{DynamicResource TextBoxStyle}" IsReadOnly="True" />

                                <TextBlock Text="Ngày sinh" VerticalAlignment="Center"/>
                                <TextBox x:Name="txtDOB" Style="{DynamicResource TextBoxStyle}" IsReadOnly="True" />

                                <TextBlock Text="Giới tính" VerticalAlignment="Center"/>
                                <TextBox x:Name="txtGender" Style="{DynamicResource TextBoxStyle}" IsReadOnly="True" />

                                <TextBlock Text="Lớp" VerticalAlignment="Center"/>
                                <StackPanel Orientation="Horizontal">
                                    <TextBox x:Name="txtClass" Style="{DynamicResource TextBoxStyle}" IsReadOnly="True" Width="160" />
                                    <ComboBox x:Name="cbClass" Width="160" Visibility="Collapsed" Margin="6,0,0,0" DisplayMemberPath="TenLop" SelectedValuePath="MaLop"/>
                                </StackPanel>

                                <TextBlock Text="Khoa" VerticalAlignment="Center"/>
                                <StackPanel Orientation="Horizontal">
                                    <TextBox x:Name="txtFaculty" Style="{DynamicResource TextBoxStyle}" IsReadOnly="True" Width="160" />
                                    <ComboBox x:Name="cbFaculty" Width="160" Visibility="Collapsed" Margin="6,0,0,0" DisplayMemberPath="TenKhoa" SelectedValuePath="MaKhoa" SelectionChanged="CbFaculty_SelectionChanged"/>
                                </StackPanel>

                                <TextBlock Text="Trạng thái học tập" VerticalAlignment="Center"/>
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock x:Name="txtStatus" Text="-" VerticalAlignment="Center" FontWeight="SemiBold"/>
                                    <ComboBox x:Name="cbStatus" Width="140" Visibility="Collapsed" Margin="6,0,0,0">
                                        <ComboBoxItem Content="Đang học" Tag="1" />
                                        <ComboBoxItem Content="Nghỉ học" Tag="0" />
                                    </ComboBox>
                                </StackPanel>
                            </UniformGrid>

                            <TextBlock Text="Ghi chú: Các trường MSV, Lớp, Khoa, Trạng thái là thông tin sinh viên. Nếu trống, bạn có thể chọn để hoàn thiện." Foreground="#666" FontSize="12" Margin="0,8,0,0" TextWrapping="Wrap"/>
                        </StackPanel>
                    </Border>

                    <!-- Account info group -->
                    <Border Grid.Column="2" Background="#FAFAFA" Padding="16" CornerRadius="8" BorderBrush="#EEE" BorderThickness="1">
                        <StackPanel>
                            <TextBlock Text="Thông tin tài khoản" FontSize="16" FontWeight="SemiBold" Margin="0,0,0,8"/>

                            <UniformGrid Columns="2" Rows="3" Margin="0,8,0,0">
                                <TextBlock Text="Tài khoản (username)" VerticalAlignment="Center"/>
                                <TextBox x:Name="txtUsername" Style="{DynamicResource TextBoxStyle}" IsReadOnly="True" />

                                <TextBlock Text="Mật khẩu" VerticalAlignment="Center"/>
                                <PasswordBox x:Name="pwdBox" Width="200" IsEnabled="False"/>

                                <TextBlock Text="Ghi chú" VerticalAlignment="Center"/>
                                <TextBlock Text="Mật khẩu lấy từ bảng tài khoản (tai_khoan). Không thể thay đổi từ đây." Foreground="#666" FontSize="12" TextWrapping="Wrap"/>
                            </UniformGrid>

                            <TextBlock Text="Ghi chú: Các trường trên thuộc thông tin tài khoản (Account). MSV và Tài khoản không thể thay đổi." Foreground="#666" FontSize="12" Margin="0,8,0,0" TextWrapping="Wrap"/>
                        </StackPanel>
                    </Border>

                        </Grid>
                    </ScrollViewer>

                <!-- Save Button -->
                <Button x:Name="BtnSave"
                        Grid.Row="1"
                        Content="Save Changes"
                        HorizontalAlignment="Left"
                        Margin="0,40,0,0"
                        Width="160"
                        Height="40"
                        Background="#3366FF"
                        Foreground="White"
                        FontWeight="SemiBold"
                        BorderThickness="0"
                        Cursor="Hand"
                        Style="{DynamicResource ActionButtonStyle}"
                        Visibility="Collapsed"
                        Click="BtnSave_Click"/>

            </Grid>
        </Border>
    </Grid>
</UserControl>
